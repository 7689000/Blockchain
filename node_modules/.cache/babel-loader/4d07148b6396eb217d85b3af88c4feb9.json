{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/Blockchain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/workspace/Blockchain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/workspace/Blockchain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import{useRef}from'react';import'./App.css';import abi from'./contracts/ABI.json';import{ethers}from'ethers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var contractAddress=\"0xF786878156D6d0964CA078D8EB3D7fC89D25d6C2\";var cleune;var cledeux;var lien;function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentAccount=_useState2[0],setCurrentAccount=_useState2[1];var checkWalletIsConnected=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _window,ethereum,accounts,account;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_window=window,ethereum=_window.ethereum;if(ethereum){_context.next=6;break;}console.log(\"Make sure you have Metamask installed!\");return _context.abrupt(\"return\");case 6:console.log(\"Wallet exists! We're ready to go!\");case 7:_context.next=9;return ethereum.request({method:'eth_accounts'});case 9:accounts=_context.sent;if(accounts.length!==0){account=accounts[0];console.log(\"Found an authorized account: \",account);setCurrentAccount(account);}else{console.log(\"No authorized account found\");}case 11:case\"end\":return _context.stop();}}},_callee);}));return function checkWalletIsConnected(){return _ref.apply(this,arguments);};}();var connectWalletHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _window2,ethereum,accounts;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_window2=window,ethereum=_window2.ethereum;if(!ethereum){alert(\"Please install Metamask!\");}_context2.prev=2;_context2.next=5;return ethereum.request({method:'eth_requestAccounts'});case 5:accounts=_context2.sent;console.log(\"Found an account! Address: \",accounts[0]);setCurrentAccount(accounts[0]);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10]]);}));return function connectWalletHandler(){return _ref2.apply(this,arguments);};}();function resultats(){var name=document.getElementById(\"fname\").value;var message=document.getElementById(\"fmessage\").value;var lien=document.getElementById(\"fimg\").value;document.getElementById(\"modnom\").innerHTML=name;document.getElementById(\"modmess\").innerHTML=message;document.getElementById(\"modurl\").innerHTML=lien;}function copiercoller(){var range=document.createRange();range.selectNode(document.getElementById(\"jsontext\"));window.getSelection().removeAllRanges();// clear current selection\nwindow.getSelection().addRange(range);// to select text\ndocument.execCommand(\"copy\");window.getSelection().removeAllRanges();// to deselect\n}var cleenvoyeur=useRef(null);var clereceveur=useRef(null);var lelien=useRef(null);function handleClick(){cleune=cleenvoyeur.current.value;cledeux=clereceveur.current.value;lien=lelien.current.value;console.log(cleune);console.log(cledeux);console.log(lien);}var mintNftHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _window3,ethereum,provider,signer,nftContract,nftTxn;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_window3=window,ethereum=_window3.ethereum;if(!ethereum){_context3.next=16;break;}provider=new ethers.providers.Web3Provider(ethereum);signer=provider.getSigner();nftContract=new ethers.Contract(contractAddress,abi,signer);console.log(\"Initialize payment\");_context3.next=9;return nftContract.safeMint(cleune,cledeux,lien);case 9:nftTxn=_context3.sent;console.log(\"Mining... please wait\");_context3.next=13;return nftTxn.wait();case 13:console.log(\"Mined, see transaction: https://goerli.etherscan.io/tx/${nftTxn.hash}\");_context3.next=17;break;case 16:console.log(\"Ethereum object does not exist\");case 17:_context3.next=22;break;case 19:_context3.prev=19;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 22:case\"end\":return _context3.stop();}}},_callee3,null,[[0,19]]);}));return function mintNftHandler(){return _ref3.apply(this,arguments);};}();var connectWalletButton=function connectWalletButton(){return/*#__PURE__*/_jsx(\"button\",{onClick:connectWalletHandler,className:\"cta-button connect-wallet-button\",children:\"Connect Wallet\"});};var mintNftButton=function mintNftButton(){return/*#__PURE__*/_jsx(\"button\",{onClick:mintNftHandler,className:\"cta-button mint-nft-button\",children:\"Mint NFT\"});};useEffect(function(){checkWalletIsConnected();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"main-app\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"snowflakes\",\"aria-hidden\":\"flase\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"}),/*#__PURE__*/_jsx(\"div\",{class:\"snowflake\",children:\"\\u2745\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"HO HO HO\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"C'est la fin de l'ann\\xE9e... Les f\\xEAtes approchent et le Bitcoin est au plus bas. Vous n'avez plus aucun Ethere dans vos poches...\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Offrez des \",/*#__PURE__*/_jsx(\"b\",{children:\"NFT\"}),\" pour NOEL! C'est a la mode et tout le monde pense que ca coute super cher\"]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"megaform\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"form1\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Etape 1 : Cr\\xE9ez le NFT!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Donnez un nom \\xE0 votre cadeau!\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"fname\",placeholder:\"Nom du cadeau\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Quelle message voulez vous lui dire?\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"fmessage\",placeholder:\"Message\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Entrez l'URL de l'image que vous voulez offrire!\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"fimg\",placeholder:\"Lien Image\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",id:\"mybutton\",onClick:resultats,children:\"Etape suivante!\"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"form2\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Etape 2 : Emballez le NFT!\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"jsontext\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"{\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"  \\\"title\\\": \\\"Asset Metadata\\\",\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"  \\\"type\\\": \\\"object\\\"  ,\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"  \\\"properties\\\": \",\"{\"]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"    \\\"name\\\": \",\"{\"]}),/*#__PURE__*/_jsx(\"h4\",{children:\"     \\\"type\\\": \\\"string\\\",\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"      \\\"description\\\": \\\"\",/*#__PURE__*/_jsx(\"a\",{id:\"modnom\",children:\"Nom\"}),\"\\\"\"]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"}\",\",\"]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"    \\\"description\\\":\",\"{\"]}),/*#__PURE__*/_jsx(\"h4\",{children:\"      \\\"type\\\": \\\"string\\\",\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"      \\\"description\\\": \\\"\",/*#__PURE__*/_jsx(\"a\",{id:\"modmess\",children:\"Message\"}),\"\\\"\"]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"}\",\",\"]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"    \\\"image\\\": \",\"{\"]}),/*#__PURE__*/_jsx(\"h4\",{children:\"      \\\"type\\\": \\\"string\\\",\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"      \\\"description\\\": \\\"\",/*#__PURE__*/_jsx(\"a\",{id:\"modurl\",children:\"URL\"}),\"\\\"\"]}),/*#__PURE__*/_jsx(\"h4\",{children:\"}\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"}\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"}\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",id:\"mybutton\",onClick:copiercoller,children:\"Copier le texte\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Apr\\xE8s avoir copi\\xE9 le texte, le coller sur la page JSON KEPPER et r\\xE9cuperer le lien\"}),/*#__PURE__*/_jsx(\"form\",{action:\"https://www.jsonkeeper.com\",method:\"get\",target:\"_blank\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Aller sur Json keeper\"})}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"form3\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Etape 3 : Offrez le NFT!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Quelle est le lien que vous avez obtenu?\"}),/*#__PURE__*/_jsx(\"input\",{ref:lelien,type:\"text\",id:\"unlien\",name:\"message\",placeholder:\"Lien JSON KEEPER\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Quelle est votre cl\\xE9e?\"}),/*#__PURE__*/_jsx(\"input\",{ref:cleenvoyeur,type:\"text\",id:\"cleenv\",name:\"message\",placeholder:\"Votre cl\\xE9e\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Quelle est la cl\\xE9 du destinataire?\"}),/*#__PURE__*/_jsx(\"input\",{ref:clereceveur,type:\"text\",id:\"clere\",name:\"message\",placeholder:\"Cl\\xE9e destinataire\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,children:\"Envoyez les INFOS\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Enfin, cliquez sur le gros bouton!\"}),/*#__PURE__*/_jsx(\"div\",{children:currentAccount?mintNftButton():connectWalletButton()})]})]})]});}export default App;","map":{"version":3,"sources":["/workspace/Blockchain/src/App.js"],"names":["useEffect","useState","useRef","abi","ethers","contractAddress","cleune","cledeux","lien","App","currentAccount","setCurrentAccount","checkWalletIsConnected","window","ethereum","console","log","request","method","accounts","length","account","connectWalletHandler","alert","resultats","name","document","getElementById","value","message","innerHTML","copiercoller","range","createRange","selectNode","getSelection","removeAllRanges","addRange","execCommand","cleenvoyeur","clereceveur","lelien","handleClick","current","mintNftHandler","provider","providers","Web3Provider","signer","getSigner","nftContract","Contract","safeMint","nftTxn","wait","connectWalletButton","mintNftButton"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport {useRef} from 'react';\nimport './App.css';\n\nimport abi from './contracts/ABI.json';\nimport { ethers } from 'ethers';\n\nconst contractAddress = \"0xF786878156D6d0964CA078D8EB3D7fC89D25d6C2\";\nvar cleune;\nvar cledeux;\nvar lien;\n\n\nfunction App() {\n\n\n \n\n  const [currentAccount, setCurrentAccount] = useState(null);\n\n  const checkWalletIsConnected = async () => {\n    const { ethereum } = window;\n\n    if (!ethereum) {\n      console.log(\"Make sure you have Metamask installed!\");\n      return;\n    } else {\n      console.log(\"Wallet exists! We're ready to go!\")\n    }\n\n    const accounts = await ethereum.request({ method: 'eth_accounts' });\n\n    if (accounts.length !== 0) {\n      const account = accounts[0];\n      console.log(\"Found an authorized account: \", account);\n      setCurrentAccount(account);\n    } else {\n      console.log(\"No authorized account found\");\n    }\n  }\n\n  const connectWalletHandler = async () => {\n    const { ethereum } = window;\n\n    if (!ethereum) {\n      alert(\"Please install Metamask!\");\n    }\n\n    try {\n      const accounts = await ethereum.request({ method: 'eth_requestAccounts' });\n      console.log(\"Found an account! Address: \", accounts[0]);\n      setCurrentAccount(accounts[0]);\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n function resultats(){ \n\n    var name = document.getElementById(\"fname\").value;\n    var message = document.getElementById(\"fmessage\").value;\n    var lien = document.getElementById(\"fimg\").value;\n\n    document.getElementById(\"modnom\").innerHTML=name;\n    document.getElementById(\"modmess\").innerHTML=message;\n    document.getElementById(\"modurl\").innerHTML=lien;\n}\n\n\n  function copiercoller(){\n    \n      var range = document.createRange();\n      range.selectNode(document.getElementById(\"jsontext\"));\n      window.getSelection().removeAllRanges(); // clear current selection\n      window.getSelection().addRange(range); // to select text\n      document.execCommand(\"copy\");\n      window.getSelection().removeAllRanges();// to deselect\n  \n  }\n\n  const cleenvoyeur = useRef(null);\n  const clereceveur = useRef(null);\n  const lelien = useRef(null);\n\n  function handleClick() {\n    cleune = cleenvoyeur.current.value;\n    cledeux = clereceveur.current.value;\n    lien = lelien.current.value;\n\n    console.log(cleune);\n    console.log(cledeux);\n    console.log(lien);\n  }\n\n  const mintNftHandler = async () => {\n    try {\n      const { ethereum } = window;\n\n      if (ethereum) {\n        const provider = new ethers.providers.Web3Provider(ethereum);\n        const signer = provider.getSigner();\n        const nftContract = new ethers.Contract(contractAddress, abi, signer);\n\n        console.log(\"Initialize payment\");\n        let nftTxn = await nftContract.safeMint(cleune,cledeux,lien);\n\n        console.log(\"Mining... please wait\");\n        await nftTxn.wait();\n\n        console.log(\"Mined, see transaction: https://goerli.etherscan.io/tx/${nftTxn.hash}\");\n\n      } else {\n        console.log(\"Ethereum object does not exist\");\n      }\n\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  const connectWalletButton = () => {\n    return (\n      <button onClick={connectWalletHandler} className='cta-button connect-wallet-button'>\n        Connect Wallet\n      </button>\n    )\n  }\n\n  const mintNftButton = () => {\n    return (\n      <button onClick={mintNftHandler} className='cta-button mint-nft-button'>\n        Mint NFT\n      </button>\n    )\n  }\n\n\n\n    useEffect(() => {\n      checkWalletIsConnected();\n    }, [])\n  \n\n\n  \n\n  return (\n    <div className='main-app'>\n      <div class=\"snowflakes\" aria-hidden=\"flase\">  \n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n        <div class=\"snowflake\">\n        ❅ \n        </div>\n      </div>\n\n      <div id=\"header\">  \n    <h1>HO HO HO</h1>\n    <h2>C'est la fin de l'année... Les fêtes approchent et le Bitcoin est au plus bas. Vous n'avez plus aucun Ethere dans vos poches...</h2>\n    <h2>Offrez des <b>NFT</b> pour NOEL! C'est a la mode et tout le monde pense que ca coute super cher</h2>\n</div>\n\n\n<div id=\"megaform\" >  \n\n<div id=\"form1\" >  \n    <h3>Etape 1 : Créez le NFT!</h3>\n\n    <p>Donnez un nom à votre cadeau!</p> \n    <input type=\"text\" id=\"fname\" placeholder=\"Nom du cadeau\"></input>\n\n    <p>Quelle message voulez vous lui dire?</p>\n    <input type=\"text\" id=\"fmessage\" placeholder=\"Message\"></input>\n\n    <p>Entrez l'URL de l'image que vous voulez offrire!</p>\n    <input type=\"text\" id=\"fimg\" placeholder=\"Lien Image\"></input>\n\n    <br></br>\n    <button type=\"button\" id=\"mybutton\" onClick={resultats}>Etape suivante!</button>\n    <br></br>\n</div>\n\n\n<div id=\"form2\"> \n<h3>Etape 2 : Emballez le NFT!</h3>\n\n\n\n<div id=\"jsontext\">\n    <h4>{\"{\"}</h4>\n    <h4>  \"title\": \"Asset Metadata\",</h4>   \n    <h4>  \"type\": \"object\"  ,</h4> \n        <h4>  \"properties\": {\"{\"}</h4>\n        <h4>    \"name\": {\"{\"}</h4>\n            <h4>     \"type\": \"string\",</h4>          \n            <h4>      \"description\": \"<a id=\"modnom\">Nom</a>\"</h4>\n        <h4>{   \"}\"},</h4>    \n        <h4>    \"description\":{\"{\"}</h4>       \n                <h4>      \"type\": \"string\",</h4>          \n                <h4>      \"description\": \"<a id=\"modmess\">Message</a>\"</h4>          \n        <h4>{   \"}\"},</h4>\n        <h4>    \"image\": {\"{\"}</h4>\n                    <h4>      \"type\": \"string\",</h4>         \n                    <h4>      \"description\": \"<a id=\"modurl\">URL</a>\"</h4>     \n            <h4>{   \"}\"}</h4>\n            <h4>{ \"}\"}</h4>\n            <h4>{\"}\"}</h4>\n                  \n</div>     \n                  \n\n    <button type=\"button\" id=\"mybutton\" onClick={copiercoller}>Copier le texte</button> \n\n   \n    <p>Après avoir copié le texte, le coller sur la page JSON KEPPER et récuperer le lien</p>\n   \n    <form action=\"https://www.jsonkeeper.com\" method=\"get\" target=\"_blank\">  \n        <button type=\"submit\">Aller sur Json keeper</button>\n     </form>\n    <br></br>\n\n    </div >\n\n  \n    \n\n    <div id=\"form3\">\n\n    <h3>Etape 3 : Offrez le NFT!</h3>\n\n        <p>Quelle est le lien que vous avez obtenu?</p>\n        <input ref={lelien} type=\"text\" id=\"unlien\" name=\"message\" placeholder='Lien JSON KEEPER'/>\n\n\n        <p>Quelle est votre clée?</p>\n        <input ref={cleenvoyeur} type=\"text\" id=\"cleenv\" name=\"message\" placeholder='Votre clée'/>\n\n        <p>Quelle est la clé du destinataire?</p>\n        <input ref={clereceveur} type=\"text\" id=\"clere\" name=\"message\" placeholder='Clée destinataire'/>\n\n        \n        <br/>\n        <button onClick={handleClick}>Envoyez les INFOS</button>\n\n\n        <h3>Enfin, cliquez sur le gros bouton!</h3>\n\n  \n      <div>\n        {currentAccount ? mintNftButton() : connectWalletButton()}\n      </div>\n    </div>\n    </div>\n\n    \n\n \n\n\n\n      \n</div>\n  )\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}